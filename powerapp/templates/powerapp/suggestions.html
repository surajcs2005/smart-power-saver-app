{% extends 'base.html' %}
{% block title %}AI Suggestions - Smart Power Saver{% endblock %}

{% block content %}
<div class="dashboard-container">
    <div class="dashboard-header">
        <h1><i class="fas fa-lightbulb"></i> AI-based Energy Saving Suggestions</h1>
    </div>
    <div class="kpi-grid" id="suggestions-grid"></div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function(){
    fetch('/api/suggestions/')
        .then(r=>r.json())
        .then(json=>{
            const grid = document.getElementById('suggestions-grid');
            grid.innerHTML='';
            json.suggestions.forEach(s=>{
                const card = document.createElement('div');
                card.className = 'kpi-card gradient-purple';
                card.innerHTML = `
                    <div class="kpi-label">${s.device} • ${s.room}</div>
                    <div class="kpi-value">Avg ${s.avg_power}W</div>
                    <div class="kpi-sub">${s.suggestion} • Est. savings ₹${s.expected_savings_rs}</div>
                    <div style="margin-top:.5rem">
                        <button class="btn btn-secondary" onclick="alert('Applied (mock)')"><i class="fas fa-toggle-on"></i> Apply</button>
                    </div>`;
                grid.appendChild(card);
            })
        })
});
</script>
{% endblock %}

